sudo: required
language: generic

matrix:
  include:
   - python: 3.6

   - dist: xenial
     os: linux
     arch: amd64

   - dist: bionic
     os: linux
     arch: amd64

branches:
  only:
    - master

compiler:
  - gcc

before_install:
  # Install the latest version of Miniconda
  - wget http://repo.continuum.io/miniconda/Miniconda-latest-Linux-x86_64.sh -O miniconda.sh
  - chmod +x miniconda.sh
  - ./miniconda.sh -b
  - export PATH=/home/travis/miniconda/bin:$PATH
  - conda update --yes conda  # Update CONDA without command line prompt
  - conda install mamba

install:

  # - curl -s "https://raw.githubusercontent.com/arthurbeggs/scripts/master/install_apps/install_opencv2.sh" | bash
  - git clone https://github.com/grassjelly/testr
  - cd testr
  - mamba env create -f environment.yaml
  - conda activate traffic-experiments
  - mkdir build && cd build
  - cmake ..
  - make

notifications:
  email:
    - jimenojmm@gmail.com